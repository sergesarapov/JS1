{"version":3,"sources":["Buttons.js","Cart.js","Item.js","Main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../script.js","sourcesContent":["// Записываю кнопки в переменные\r\nlet buttons = document.querySelectorAll(\".buy\");\r\nlet purgeButton = document.querySelector(\".purge\");\r\n\r\nlet pluses = [];\r\nlet minuses = [];\r\n\r\n// Кнопки \"Купить\"\r\nbuttons.forEach((button) => {\r\n  button.addEventListener(\"click\", function () {\r\n    let basketItem = newCart.createNewItem(button.parentNode);\r\n    newCart.addItem(basketItem);\r\n    newCart.renderCart();\r\n    initPag(); //инициализирую кнопки товара\r\n  });\r\n});\r\n\r\n// Кнопка \"Очистить\"\r\npurgeButton.addEventListener(\"click\", function () {\r\n  newCart.cartItems = [];\r\n  newCart.amount = 0;\r\n  priceCount.innerHTML = newCart.amount;\r\n  itemsBox.innerHTML = \"\";\r\n});\r\n\r\n//функция инициализирует кнопки + и -\r\n// и добавляет event listeners\r\n// с функциями добавления и убавления кол-ва товаров,\r\n// а также меняет общую сумму заказа\r\nfunction initPag() {\r\n  pluses = document.querySelectorAll(\".plus\");\r\n  minuses = document.querySelectorAll(\".minus\");\r\n  pluses.forEach((plus) => {\r\n    plus.addEventListener(\"click\", function () {\r\n      let singlePag = plus.parentNode;\r\n      let currentId = +singlePag.parentNode.querySelector(\".id\").innerHTML;\r\n      newCart.cartItems.forEach((item) => {\r\n        if (item.id == currentId) {\r\n          item.quantity++;\r\n          newCart.amount += item.price;\r\n          newCart.renderCart();\r\n          initPag();\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  minuses.forEach((minus) => {\r\n    minus.addEventListener(\"click\", function () {\r\n      let singlePag = minus.parentNode;\r\n      let currentId = +singlePag.parentNode.querySelector(\".id\").innerHTML;\r\n      newCart.cartItems.forEach((item, index) => {\r\n        if (item.id == currentId) {\r\n          if (item.quantity == 1) {\r\n            newCart.cartItems.splice(index, 1);\r\n          }\r\n          item.quantity--;\r\n          newCart.amount -= item.price;\r\n          newCart.renderCart();\r\n          initPag();\r\n        }\r\n      });\r\n    });\r\n  });\r\n}\r\n","class Cart {\r\n  constructor() {\r\n    this.amount = 0;\r\n    this.cartItems = [];\r\n  }\r\n\r\n  createNewItem(product) {\r\n    let id = product.id;\r\n    let name = product.querySelector(\"h3\").innerHTML;\r\n    let price = parseInt(product.querySelector(\".price\").innerHTML);\r\n    this.amount += price;\r\n    let newItem = new CartItem(id, name, price);\r\n    return newItem;\r\n  }\r\n\r\n  checkIfAdded(item) {\r\n    for (let i = 0; i <= this.cartItems.length; i++) {\r\n      if (this.cartItems[i] == undefined) {\r\n        return false;\r\n      }\r\n      if (this.cartItems[i].id === item.id) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  addQuantity(item) {\r\n    this.cartItems.forEach((product) => {\r\n      if (product.id == item.id) {\r\n        product.quantity++;\r\n      } else {\r\n        return;\r\n      }\r\n    });\r\n  }\r\n\r\n  addItem(newItem) {\r\n    if (this.checkIfAdded(newItem)) {\r\n      this.addQuantity(newItem);\r\n    } else {\r\n      this.cartItems.push(newItem);\r\n    }\r\n  }\r\n\r\n  renderCart() {\r\n    priceCount.innerHTML = this.amount;\r\n    itemsBox.innerHTML = \"\";\r\n    this.cartItems.forEach((item) => {\r\n      let cartItemBox = document.createElement(\"div\");\r\n      cartItemBox.classList.add(\"cart-box\");\r\n      cartItemBox.innerHTML = `<div>${item.name} </div>\r\n      <div class='cartitem-id'>Art. <span class = 'id'>${item.id}</span></div>\r\n      <div>Цена ${item.price} руб.</div>\r\n      <div>${item.quantity} шт.</div>\r\n      <div class='pag'><div class='plus'>+</div><div class='minus'>-</div></div>`;\r\n      itemsBox.insertAdjacentElement(\"afterbegin\", cartItemBox);\r\n    });\r\n  }\r\n}\r\n","class CartItem {\r\n  constructor(id, name, price) {\r\n    this.id = +id;\r\n    this.name = name;\r\n    this.price = +price;\r\n    this.quantity = 1;\r\n  }\r\n}\r\n","// Инициализирую элементы\r\nlet basket = document.querySelector(\".cart\");\r\nlet itemsBox = basket.querySelector(\".items-box\");\r\nlet priceCount = document.querySelector(\".price-count\");\r\n\r\n// создаю переменную с новым объектом корзины.\r\nconst newCart = new Cart();\r\n"]}